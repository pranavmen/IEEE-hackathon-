{% extends 'main.html' %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'styles/dashboard_patient.css' %}">
<div class="sidebar">
    <h2>CliQ</h2>
    <ul>
        <li><a href="{% url 'patient_dashboard' %}"><span>🏠</span> Dashboard</a></li>
        <li><a href="{% url 'patient_appointments' %}"><span>📅</span> Appointments</a></li>
        <li><a href="#"><span>🩺</span> Doctors</a></li> {# This can link to the home page or a new doctors list page #}
        <li><a href="{% url 'patient_settings' %}"><span>⚙️</span> Settings</a></li>
        <li><a href="{% url 'logout' %}"><span>🚪</span> Logout</a></li>
    </ul>
</div>
<div class="main-content">
    <header>
        <h1>Welcome, {{ request.user.name }}</h1>
        <p>Here’s a quick overview of your appointments and history.</p>
    </header>

    <div class="cards">
        <div class="card" style="background-color: #007bff; color: white;">
            <h3>Upcoming Appointments</h3>
            <p>{{ appointments.count }}</p>
        </div>
        <div class="card" style="background-color: #28a745; color: white;">
            <h3>Completed Visits</h3>
            <p>5</p>
        </div>
        <div class="card" style="background-color: #fd7e14; color: white;">
            <h3>Prescriptions</h3>
            <p>3</p>
        </div>
    </div>

    <section class="appointments">
        <h2>Upcoming Appointments</h2>
        <table>
            <thead>
                <tr>
                    <th>Doctor</th>
                    <th>Time</th>
                    <th>Department</th>
                </tr>
            </thead>
            <tbody>
                {% for appointment in appointments %}
                <tr>
                    <td>Dr. {{ appointment.doctor.name }}</td>
                    <td>{{ appointment.appointment_time|time:"g:i A" }} on {{ appointment.appointment_date|date:"F j, Y" }}</td>
                    <td>{{ appointment.specialization.name|default:'General' }}</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="3">You have no upcoming appointments.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </section>

    <div class="book-btn-wrapper">
        <a href="{% url 'book_appointment' %}" class="book-btn">+ Book Appointment</a>
    </div>
</div>
{% endblock content %}